# 连接设计

## 问题

1. 怎么做权限管理
1. 怎么维持连接状态
1. 怎么优雅退出

## 可能涉及的场景

1. 读写分离
1. 主从复制
1. 服务状态查询、上报
1. cluster 节点之间的通信
1. proxy 下节点的通信

## 目前设计

1. 作为服务端, 单 tcp listener，没有任何权限校验
1. 作为 replica, 另外有条连接接收复制的写命令

## 新设计

1. [ ] [redis 6 已经有了](https://redis.io/topics/acl)
   - 大概涉及到命令分类
   - 多账户管理分类
