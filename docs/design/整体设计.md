# 整体设计

## 目标

1. 对外的能力尽量 兼容 redis

   - 这样可以更好的复用 redis 的各种客户端能力
   - 各种基础的命令
   - Keyspace Notification
   - [acl](https://redis.io/topics/acl)

1. 比 redis 的效率更高

   - 全新数据引擎，充分利用多线程
   - 更高的 io 效率：io-uring
   - 对大 key 优化
   - 对热 key 优化

1. 比 redis 的坑更少

   - 使用 rust 减少各种内存安全上的 bug
   - 过期数据及时清理

1. 比 redis 更好运维

   - pd 模块
   - proxy

1. 比 redis 更强的扩展性

   - (这个还没想好)

1. 政治正确
   - 不使用 master、slave 等字眼

## 模块

1. core
   - 负责存储，可以单独使用
1. pd
   - raft 保障高可用
   - 协调主从
   - 协调 slot
   - 管理 group 级别的配置
   - 通知 proxy 主从、slot 的变更
   - 通知 client 主从、slot、proxy 的变更
   - 负载均衡 proxy，让 client 切换 proxy
   - 负载均衡 slot，动态迁移高频 slot
1. cloud proxy
   - slot 的 proxy, 使客户端可以使用非 cluster 模式的客户端
1. local proxy
   - 同上，部署在本地，减少一次网络开销
